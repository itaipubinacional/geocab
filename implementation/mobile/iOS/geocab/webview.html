<!--
 webview.html
 
 Created by Joaz Vieira Soares on 05/05/15.
 Copyright (c) 2014 Itaipu.
!-->
<html>
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">

    <link rel="stylesheet" href="ol.css" type="text/css">
    <link rel="stylesheet" href="webview.css" type="text/css">

    <script src="ol.js" type="text/javascript"></script>
    <script src="jquery-2.1.1.min.js" type="text/javascript"></script>
    <script src="jquery.touchSwipe.min.js" type="text/javascript"></script>
    <script src="geocab.app.js" type="text/javascript"></script>
    <script src="geocab.swipe.app.js" type="text/javascript"></script>
    <script src="geocab.marker.app.js" type="text/javascript"></script>
</head>

<body>

    <div id="map" class="map">

        <div id="action-state">
            <div class="add-point"></div>
        </div>

        <div id="add-state" class="hide">
            <div class="save-point"></div>
            <div class="cancel-point"></div>
            <div class="center-marker"></div>
        </div>

    </div>
    
    <div id="marker-template">
        <div  class="marker-info-box marker-t">
            <div class="marker-info-header">
                <p class="marker-title"></p>
                <div class="marker-info-close"></div>
            </div>
            <p class="marker-status"></p>
            <div class="marker-info-action">
                <div class="marker-action update">
                    <img src="edit.png">
                        <p>Editar</p>
                        </div>
                <div class="marker-action remove">
                    <img src="remove.png">
                        <p>Excluir</p>
                        </div>
                <div class="marker-action approve">
                    <img src="approve.png">
                        <p>Aprovar</p>
                        </div>
                <div class="marker-action refuse">
                    <img src="refuse.png">
                        <p>Recusar</p>
                        </div>
            </div>
            <div class="marker-info-content"></div>
        </div>
    </div>

    <div id="layer-template">
        <div class="marker-info-box layer-t">
            <div class="marker-info-header">
                <p class="marker-title"></p>
                <div class="marker-info-close"></div>
            </div>		
            <div class="marker-info-content"></div>
        </div>   	
    </div>

    <script type="text/javascript">
    $(document).ready(function() {
                      
        var iOS = {
			changeToAddMarker : function(coordenates){
				changeToAddMarker(coordenates);
			},
			showLayerMarker : function(markerId, layers){
				showLayerMarker(markerId, layers);
			},
        	showOpenMenuButton : function(){
            	showOpenMenuButton();
			},
			closeOpenMenuButton : function(){
				closeOpenMenuButton();
			},
			changeToUpdateMarker : function(marker){
				changeToUpdateMarker(marker);
            },
			changeToRefuseMarker : function(marker){
				changeToRefuseMarker(marker);
			},
			changeToApproveMarker : function(marker){
				changeToApproveMarker(marker);
			},
			changeToRemoveMarker : function(marker){
				changeToRemoveMarker(marker);
			}
        };
                      
        geocabapp.init("map", iOS);
        geocabapp.marker.init();

        $(".add-point").click(function(){
            geocabapp.changeToAddState();
        });

        $(".cancel-point").click(function(){
            geocabapp.changeToActionState();
        });

        $(".save-point").click(function(){
            geocabapp.changeToSaveState();
        });

        $("#map").on('click', '.marker-info-close', function(event){
            geocabapp.marker.hide(event);
        });
                      
		$("#map").on('click', '.marker-action.remove', function(event){
			geocabapp.marker.remove();
		});
                      
        $("#map").on('click', '.marker-action.update', function(){
            geocabapp.marker.update();
        });		
		
        $(".marker-action.approve").click(function(){
            geocabapp.marker.approve();
        });
		
        $(".marker-action.refuse").click(function(){
            geocabapp.marker.refuse();
        });		
		
    });
    </script>

</body>

</html>